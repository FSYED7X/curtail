function getFileInfo$$module$Input_0(a){var b=0,d={name:null,ext:null};-1<a.lastIndexOf("/")&&(b=a.lastIndexOf("/"));var e=a.lastIndexOf(".");d.name=a.slice(b+1,e);d.ext=a.slice(e+1);return d}function simplify$$module$Input_0(a,b){var d=gcd$$module$Input_0(a,b);return[a/d,b/d]}function gcd$$module$Input_0(a,b){for(;0!==b;){var d=a;a=b;b=d%b}return a}
var Curtail$$module$Input_0=function(a){a=void 0===a?{}:a;this._options=Object.assign({autoDownload:!1,crossOrigin:null},a);this.FORMAT={PNG:{ext:"png",transparent:!0},JPG:{ext:"jpg",transparent:!1},GIF:{ext:"gif",transparent:!1},BMP:{ext:"bmp",transparent:!1},WEBP:{ext:"webp",transparent:!0},PDF:{ext:"pdf",transparent:!0}}};
Curtail$$module$Input_0.prototype.crop=function(a,b,d,e,g){var c=this,f=document.createElement("canvas"),k=f.getContext("2d"),h=a.lastIndexOf("/")+1||0,l=a.lastIndexOf("."),p=a.slice(h,l),n=a.slice(l+1),m=new Image;return new Promise(function(h,l){m.onload=function(){f.width=e;f.height=g;k.drawImage(m,b,d,e,g,0,0,e,g);var a=new Image;a.onload=function(){if(c._options.autoDownload){var b=document.createElement("a");b.href=a.src;b.download=p+"."+n;b.click()}h(a)};a.onerror=function(a){return l(a)};
a.src=f.toDataURL("image/"+n).replace("image/"+n,"image/octet-stream")};m.onerror=function(a){return l(a)};m.src=a;c._options.crossOrigin&&(m.crossOrigin=c._options.crossOrigin)})};
Curtail$$module$Input_0.prototype.convert=function(a,b){var d=this,e=extract.getFileInfo(a);if(e.ext===b.ext)console.warn("Image is already in desired format.");else{var g=document.createElement("canvas"),c=g.getContext("2d"),f=new Image;return new Promise(function(k,h){f.onload=function(){g.width=f.width;g.height=f.height;b.transparent||(c.fillStyle="#FFF",c.fillRect(0,0,g.width,g.height));c.drawImage(f,0,0);var a=new Image;a.onload=function(){if(d._options.autoDownload){var c=document.createElement("a");
c.href=a.src;c.download=e.name+"."+b.ext;c.click()}k(a)};a.onerror=function(a){return h(a)};a.src=g.toDataURL("image/"+b.ext)};f.onerror=function(a){return h(a)};f.src=a;d._options.crossOrigin&&(f.crossOrigin=d._options.crossOrigin)})}};
Curtail$$module$Input_0.prototype.resize=function(a,b,d,e){var g=this;e=void 0===e?!0:e;var c=new Image;return new Promise(function(f,k){c.onload=function(){var a=math.simplify(c.width,c.height);"width"===b?(c.width=d,e&&(c.height=Math.round(a[1]/a[0]*d))):"height"===b&&(c.height=d,e&&(c.width=Math.round(a[0]/a[1]*d)));f(c)};c.onerror=function(a){return k(a)};c.src=a;g._options.crossOrigin&&(c.crossOrigin=g._options.crossOrigin)})};var module$Input_0={};module$Input_0.Curtail=Curtail$$module$Input_0;